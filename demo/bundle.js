var VGM=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._buf=new ArrayBuffer(256),this._view=new DataView(this._buf),this._written=0}return t.prototype._expandBuffer=function(){var t=2*this._buf.byteLength,e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this._buf)),this._buf=e,this._view=new DataView(this._buf)},t.prototype.toArrayBuffer=function(){return this._buf.slice(0,this._written)},t.prototype.setUint8=function(t,e){this._view.byteLength<t+1&&this._expandBuffer(),this._view.setUint8(t,e),this._written=Math.max(this._written,t+1)},t.prototype.setInt8=function(t,e){this._view.byteLength<t+1&&this._expandBuffer(),this._view.setInt8(t,e),this._written=Math.max(this._written,t+1)},t.prototype.setUint16LE=function(t,e){this._view.byteLength<t+2&&this._expandBuffer(),this._view.setUint16(t,e,!0),this._written=Math.max(this._written,t+2)},t.prototype.setInt16LE=function(t,e){this._view.byteLength<t+2&&this._expandBuffer(),this._view.setInt16(t,e,!0),this._written=Math.max(this._written,t+2)},t.prototype.setUint32LE=function(t,e){this._view.byteLength<t+4&&this._expandBuffer(),this._view.setUint32(t,e,!0),this._written=Math.max(this._written,t+4)},t.prototype.setInt32LE=function(t,e){this._view.byteLength<t+4&&this._expandBuffer(),this._view.setInt32(t,e,!0),this._written=Math.max(this._written,t+4)},t.prototype.setData=function(t,e){for(;this._view.byteLength<t+e.length;)this._expandBuffer();for(var r=0;r<e.length;r++)this._view.setUint8(t+r,e[r]);this._written=Math.max(this._written,t+e.length)},t.prototype.setText=function(t,e){for(;this._view.byteLength<t+(2*e.length+2);)this._expandBuffer();for(var r=0;r<e.length;r++)this.setUint16LE(t+2*r,e.charCodeAt(r));return this.setUint16LE(t+2*e.length,0),2*e.length+2},t}();function i(t){return t.clock|(t.dual?1073741824:0)}function o(t,e){if(t.setUint8(0,86),t.setUint8(1,103),t.setUint8(2,109),t.setUint8(3,32),t.setUint32LE(4,e.offsets.eof-4),t.setUint32LE(8,e.version.code),t.setUint32LE(20,0<e.offsets.gd3?e.offsets.gd3-20:0),t.setUint32LE(24,e.samples.total),t.setUint32LE(28,0<e.samples.loop?e.offsets.loop-28:0),t.setUint32LE(32,e.samples.loop),t.setUint32LE(52,e.offsets.data-52),e.chips.sn76489&&t.setUint32LE(12,i(e.chips.sn76489)|(e.chips.sn76489.t6w28?2147483648:0)),e.chips.ym2413&&t.setUint32LE(16,i(e.chips.ym2413)),257<=e.version.code&&t.setUint32LE(36,e.rate),272<=e.version.code&&(e.chips.sn76489&&(t.setUint16LE(40,e.chips.sn76489.feedback||0),t.setUint8(42,e.chips.sn76489.shiftRegisterWidth||0)),e.chips.ym2612&&t.setUint32LE(44,i(e.chips.ym2612)),e.chips.ym2151&&t.setUint32LE(48,i(e.chips.ym2151))),336<=e.version.code&&t.setUint32LE(52,(e.offsets.data||64)-52),337<=e.version.code){if(e.chips.sn76489&&t.setUint8(43,e.chips.sn76489.flags||0),e.chips.segaPcm&&(t.setUint32LE(56,i(e.chips.segaPcm)),t.setUint32LE(60,e.chips.segaPcm.interfaceRegister||0)),e.chips.rf5c68&&t.setUint32LE(64,i(e.chips.rf5c68)),e.chips.ym2203&&t.setUint32LE(68,i(e.chips.ym2203)),e.chips.ym2608&&t.setUint32LE(72,i(e.chips.ym2608)),e.chips.ym2610){var r=e.chips.ym2610.chipType||{value:0};t.setUint32LE(76,i(e.chips.ym2610)|(r.value?2147483648:0))}if(e.chips.ym3812&&t.setUint32LE(80,i(e.chips.ym3812)),e.chips.ym3526&&t.setUint32LE(84,i(e.chips.ym3526)),e.chips.y8950&&t.setUint32LE(88,i(e.chips.y8950)),e.chips.ymf262&&t.setUint32LE(92,i(e.chips.ymf262)),e.chips.ymf278b&&t.setUint32LE(96,i(e.chips.ymf278b)),e.chips.ymf271&&t.setUint32LE(100,i(e.chips.ymf271)),e.chips.ymz280b&&t.setUint32LE(104,i(e.chips.ymz280b)),e.chips.rf5c164&&t.setUint32LE(108,i(e.chips.rf5c164)),e.chips.pwm&&t.setUint32LE(112,i(e.chips.pwm)),e.chips.ay8910){t.setUint32LE(116,i(e.chips.ay8910));r=e.chips.ay8910.chipType||{value:0};t.setUint8(120,r.value),t.setUint8(121,e.chips.ay8910.flags||0)}e.chips.ym2203&&t.setUint8(122,e.chips.ym2203.ssgFlags||0),e.chips.ym2608&&t.setUint8(123,e.chips.ym2608.ssgFlags||0),t.setUint8(127,e.loopModifier)}if(352<=e.version.code&&(t.setUint8(124,e.volumeModifier),t.setUint8(126,e.loopBase)),353<=e.version.code){if(e.chips.gameBoyDmg&&t.setUint32LE(128,i(e.chips.gameBoyDmg)),e.chips.nesApu&&t.setUint32LE(132,i(e.chips.nesApu)|(e.chips.nesApu.fds?2147483648:0)),e.chips.multiPcm&&t.setUint32LE(136,i(e.chips.multiPcm)),e.chips.upd7759&&t.setUint32LE(140,i(e.chips.upd7759)),e.chips.okim6258&&(t.setUint32LE(144,i(e.chips.okim6258)),t.setUint8(148,e.chips.okim6258.flags||0)),e.chips.k054539&&t.setUint8(149,e.chips.k054539.flags||0),e.chips.c140){r=e.chips.c140.chipType||{value:0};t.setUint8(150,r.value)}e.chips.okim6295&&t.setUint32LE(152,i(e.chips.okim6295)),e.chips.k051649&&t.setUint32LE(156,i(e.chips.k051649)),e.chips.k054539&&t.setUint32LE(160,i(e.chips.k054539)),e.chips.huc6280&&t.setUint32LE(164,i(e.chips.huc6280)),e.chips.c140&&t.setUint32LE(168,i(e.chips.c140)),e.chips.k053260&&t.setUint32LE(172,i(e.chips.k053260)),e.chips.pokey&&t.setUint32LE(176,i(e.chips.pokey)),e.chips.qsound&&t.setUint32LE(180,i(e.chips.qsound))}if(368<=e.version.code&&(t.setUint32LE(188,e.offsets.extraHeader?e.offsets.extraHeader-188:0),e.extraHeader&&function(t,e,r){var n=r.volumes?12:8;t.setUint32LE(e,n);var i=0,o=0;r.clocks&&(i=function(t,e,r){var n=0;t.setUint8(e+n,r.length),n++;for(var i=0,o=r;i<o.length;i++){var s=o[i];t.setUint8(e+n,s.chipId),n++,t.setUint32LE(e+n,s.clock),n+=4}return n}(t,e+n,r.clocks),t.setUint32LE(e+4,n-4));r.volumes&&(o=function(t,e,r){var n=0;t.setUint8(e+n,r.length),n++;for(var i=0,o=r;i<o.length;i++){var s=o[i];t.setUint8(e+n,s.chipId|(s.paired?128:0)),n++,t.setUint8(e+n,s.flags),n++,t.setUint16LE(e+n,s.volume|(s.absolute?32768:0)),n+=2}return n}(t,e+n+i,r.volumes),t.setUint32LE(e+8,n-8+i))}(t,e.offsets.extraHeader,e.extraHeader)),369<=e.version.code){if(e.chips.scsp&&t.setUint32LE(184,i(e.chips.scsp)),e.chips.wonderSwan&&t.setUint32LE(192,i(e.chips.wonderSwan)),e.chips.vsu&&t.setUint32LE(196,i(e.chips.vsu)),e.chips.saa1099&&t.setUint32LE(200,i(e.chips.saa1099)),e.chips.es5503&&t.setUint32LE(204,i(e.chips.es5503)),e.chips.es5506){r=e.chips.es5506.chipType||{value:0};t.setUint32LE(208,i(e.chips.es5506)|(r.value?2147483648:0))}e.chips.es5503&&t.setUint8(212,e.chips.es5503.numberOfChannels||0),e.chips.es5506&&t.setUint8(213,e.chips.es5506.numberOfChannels||0),e.chips.c352&&t.setUint8(214,e.chips.c352.clockDivider||0),e.chips.x1_010&&t.setUint32LE(216,i(e.chips.x1_010)),e.chips.c352&&t.setUint32LE(220,i(e.chips.c352)),e.chips.ga20&&t.setUint32LE(224,i(e.chips.ga20)),t.setUint32LE(228,0)}return e.version.code<=256?64:e.offsets.data||256}e.AutoResizeBuffer=n,e.buildVGMData=function(t){for(var e=new n,r=0,i=0,o=t;i<o.length;i++){var s=o[i];e.setData(r,s.toUint8Array()),r+=s.size}return e.toArrayBuffer()},e.buildVGM=function(t){var e=new n,r=o(e,t);return e.setData(r,new Uint8Array(t.data)),r+=t.data.byteLength,t.gd3tag&&function(t,e,r){t.setUint32LE(e+0,540238919),t.setUint32LE(e+4,r.version||256);var n=e+12;n+=t.setText(n,r.trackTitle),n+=t.setText(n,r.japanese.trackTitle),n+=t.setText(n,r.gameName),n+=t.setText(n,r.japanese.gameName),n+=t.setText(n,r.system),n+=t.setText(n,r.japanese.system),n+=t.setText(n,r.composer),n+=t.setText(n,r.japanese.composer),n+=t.setText(n,r.releaseDate),n+=t.setText(n,r.vgmBy);var i=(n+=t.setText(n,r.notes))-(e+12);t.setUint32LE(e+8,i)}(e,t.offsets.gd3||r,t.gd3tag),e.toArrayBuffer()}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=["sn76489","ym2413","ym2612","ym2151","segaPcm","rf5c68","ym2203","ym2608","ym2610","ym3812","ym3526","y8950","ymf262","ymf278b","ymf271","ymz280b","rf5c164","pwm","ay8910","gameBoyDmg","nesApu","multiPcm","upd7759","okim6258","okim6295","k051649","k054539","huc6280","c140","k053260","pokey","qsound","scsp","wonderSwan","vsu","saa1099","es5503","es5506","x1_010","c352","ga20"];function o(t){return t?JSON.parse(JSON.stringify(t)):void 0}function s(t){return t?n({},t,{japanese:n({},t.japanese)}):void 0}e.chipIdToName=function(t){return i[t]},e.deepCloneChipsObject=function(t){return JSON.parse(JSON.stringify(t))},e.deepCloneExtraHeaderObject=o,e.createEmptyGD3TagObject=function(){return{version:256,size:22,trackTitle:"",gameName:"",system:"",composer:"",releaseDate:"",vgmBy:"",notes:"",japanese:{trackTitle:"",gameName:"",system:"",composer:""}}},e.deepCloneGD3TagObject=s,e.deepCloneVGMObject=function(t){return{version:n({},t.version),offsets:n({},t.offsets),samples:n({},t.samples),rate:t.rate,chips:n({},t.chips),loopModifier:t.loopModifier,loopBase:t.loopBase,volumeModifier:t.volumeModifier,extraHeader:o(t.extraHeader),data:t.data.slice(0),gd3tag:s(t.gd3tag)}},e.createEmptyVGMObject=function(){return{version:{code:368,major:"1",minor:"70"},offsets:{eof:0,data:256,loop:0,gd3:0,extraHeader:0},samples:{loop:0,total:0},chips:{},rate:60,loopModifier:0,loopBase:0,volumeModifier:0,extraHeader:void 0,data:new ArrayBuffer(0),gd3tag:void 0}},e.calcGD3TagBodySize=function(t){return 2*(t.trackTitle.length+t.gameName.length+t.system.length+t.composer.length+t.releaseDate.length+t.vgmBy.length+t.notes.length+t.japanese.trackTitle.length+t.japanese.gameName.length+t.japanese.system.length+t.japanese.composer.length+11)}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(0);function s(t){switch(t){case 0:case 64:return"ym2612";case 1:case 65:return"rf5c68";case 2:case 66:return"rf5c164";case 3:case 67:return"pwm";case 4:case 68:return"okim6258";case 5:case 69:return"huc6280";case 6:case 70:return"scsp";case 7:case 71:return"nesApu";case 128:return"segaPcm";case 129:return"ym2608";case 130:case 131:return"ym2610";case 132:return"ymf278b";case 133:return"ymf271";case 134:return"ymz280b";case 135:return"ymf278b";case 136:return"y8950";case 137:return"multiPcm";case 138:return"upd7759";case 139:return"okim6295";case 140:return"k054539";case 141:return"c140";case 142:return"k053260";case 143:return"qsound";case 144:return"es5506";case 145:return"x1_010";case 146:return"c352";case 147:return"ga20";case 192:return"rf5c68";case 193:return"rf5c164";case 194:return"nesApu";case 224:return"scsp";case 225:return"es5503";default:return"unknown"}}function a(t){switch(t){case 48:case 80:return"sn76489";case 63:case 79:return"gameGearStereo";case 81:case 161:return"ym2413";case 82:case 83:case 162:case 163:return"ym2612";case 84:case 164:return"ym2151";case 85:case 165:return"ym2203";case 86:case 87:case 166:case 167:return"ym2608";case 88:case 89:case 168:case 169:return"ym2610";case 90:case 170:return"ym3812";case 91:case 171:return"ym3526";case 92:case 172:return"y8950";case 93:case 173:return"ymz280b";case 94:case 95:case 174:case 175:return"ymf262";case 160:return"ay8910";case 176:return"rf5c68";case 177:return"rf5c164";case 178:return"pwm";case 179:return"gameBoyDmg";case 180:return"nesApu";case 181:return"multiPcm";case 182:return"upd7759";case 183:return"okim6258";case 184:return"okim6295";case 185:return"huc6280";case 186:return"k053260";case 187:return"pokey";case 188:return"wonderSwan";case 189:return"saa1099";case 190:return"es5506";case 191:return"ga20";case 192:return"segaPcm";case 193:return"rf5c68";case 194:return"rf5c164";case 195:return"multiPcm";case 196:return"qsound";case 197:return"scsp";case 198:return"wonderSwan";case 199:return"vsu";case 200:return"x1_010";case 208:return"ymf278b";case 209:return"ymf271";case 210:return"k051649";case 211:return"k054539";case 212:return"c140";case 213:return"es5503";case 214:return"es5506";case 225:return"c352";default:throw new Error("Unknown chip")}}function c(t,e){return(255&t[e])<<8|255&t[e+1]}function u(t,e,r){t[e]=r>>8&255,t[e+1]=255&r}function f(t,e){return 255&t[e]|(255&t[e+1])<<8}function p(t,e,r){t[e]=255&r,t[e+1]=r>>8&255}function l(t,e){return 255&t[e]|(255&t[e+1])<<8|(255&t[e+2])<<16}function h(t,e,r){t[e]=255&r,t[e+1]=r>>8&255,t[e+2]=r>>16&255}function d(t,e){return 255&t[e]|(255&t[e+1])<<8|(255&t[e+2])<<16|(255&t[e+3])<<24}function m(t,e,r){t[e]=255&r,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255}e.blockTypeToChipName=s,e.commandToChipName=a;var y=function(){function t(t){this.cmd=t}return t.prototype.toJSON=function(){return this.toObject()},t}();e.VGMCommand=y;var b=function(t){function e(e){var r=t.call(this,103)||this;return r.blockType=e.blockType,r.blockSize=e.blockSize,r.blockData=e.blockData,r}return i(e,t),e.prototype.copy=function(t){return new e({blockType:null!=t.blockType?t.blockType:this.blockType,blockSize:null!=t.blockSize?t.blockSize:this.blockSize,blockData:null!=t.blockData?t.blockData.slice(0):this.blockData.slice(0)})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"chip",{get:function(){return s(this.blockType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return 7+this.blockData.length},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);t[0]=103,t[1]=102,t[2]=this.blockType,m(t,3,this.blockSize);for(var e=0;e<this.blockData.length;e++)t[e+7]=this.blockData[e];return t},e.parse=function(t,r){if(103===t[r]){for(var n=t[r+2],i=d(t,r+3),o=new Uint8Array(i),s=0;s<i;s++)o[s]=t[r+7+s];return new e({blockType:n,blockSize:i,blockData:o})}return null},e.prototype.toObject=function(){return{cmd:this.cmd,chip:this.chip,size:this.size,blockType:this.blockType,blockSize:this.blockSize,blockData:this.blockData.slice(0)}},e.fromObject=function(t){if(103===t.cmd){if(null!=t.blockType&&null!=t.blockData&&null!=t.blockSize)return new e(t);throw new Error("Can't create VGMDataBlockCommand: required parameter is missing.")}return null},e}(y);e.VGMDataBlockCommand=b;var g=function(t){function e(){return t.call(this,102)||this}return i(e,t),e.prototype.copy=function(t){return new e},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(1);return t[0]=102,t},e.parse=function(t,r){return void 0===r&&(r=0),102===t[r]?new e:null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size}},e.fromObject=function(t){return 102===t.cmd?new e:null},e}(y);e.VGMEndCommand=g;var v=function(t){function e(e,r){var n=t.call(this,e)||this;if(97==e)n.count=r;else if(98==e)n.count=735;else if(99==e)n.count=882;else{if(!(112<=e&&e<=127))throw new Error("0x"+e.toString(16)+" is not a VGMWaitCommand.");n.count=1+(15&e)}if(n.count!==r)throw new Error("Count "+r+" is given for command 0x"+e.toString(16)+" but the count should be "+n.count+".");return n}return i(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return 97===this.cmd?3:1},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=this.cmd,97===this.cmd&&p(t,1,this.count),t},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,count:this.count}},e}(y);e.VGMWaitCommand=v;var w=function(t){function e(e){var r=t.call(this,97,e.count)||this;if(e.count<0||65535<e.count)throw new Error("Count overflow: "+e.count);return r}return i(e,t),e.prototype.copy=function(t){return new e({count:null!=t.count?t.count:this.count})},e.prototype.clone=function(){return this.copy({})},e.parse=function(t,r){return void 0===r&&(r=0),97===t[r]?new e({count:f(t,r+1)}):null},e.fromObject=function(t){if(97===t.cmd){if(null==t.count)throw new Error("Can't create VGMWaitCommand: obj.count is missing.");return new e({count:t.count})}return null},e}(v);e.VGMWaitWordCommand=w;var O=function(t){function e(e){var r=t.call(this,112|e.count-1&15,e.count)||this;if(e.count<1||16<e.count)throw new Error("Invalid count: "+e.count);return r}return i(e,t),e.prototype.copy=function(t){return new e({count:null!=t.count?t.count:this.count})},e.prototype.clone=function(){return this.copy({})},e.parse=function(t,r){void 0===r&&(r=0);var n=t[r];return 112<=n&&n<=127?new e({count:1+(15&n)}):null},e.fromObject=function(t){return 112<=t.cmd&&t.cmd<=127?new e({count:1+(15&t.cmd)}):null},e}(v);e.VGMWaitNibbleCommand=O;var j=function(t){function e(){return t.call(this,98,735)||this}return i(e,t),e.prototype.copy=function(t){return new e},e.prototype.clone=function(){return this.copy({})},e.parse=function(t,r){return void 0===r&&(r=0),98===t[r]?new e:null},e.fromObject=function(t){return 98===t.cmd?new e:null},e}(v);e.VGMWait735Command=j;var U=function(t){function e(){return t.call(this,99,882)||this}return i(e,t),e.prototype.copy=function(t){return new e},e.prototype.clone=function(){return this.copy({})},e.parse=function(t,r){return void 0===r&&(r=0),99===t[r]?new e:null},e.fromObject=function(t){return 99===t.cmd?new e:null},e}(v);e.VGMWait882Command=U;var k=function(t){function e(e){var r=t.call(this,128|15&e.count)||this;if(e.count<0||15<e.count)throw new Error("Invalid count "+e.count+" for VGMWrite2ACommand.");return r}return i(e,t),e.prototype.copy=function(t){return new e({count:null!=t.count?t.count:this.count})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"count",{get:function(){return 15&this.cmd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=this.cmd,t},e.parse=function(t,r){void 0===r&&(r=0);var n=t[r];return 128<=n&&n<=143?new e({count:15&n}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,count:this.count}},e.fromObject=function(t){return 128<=t.cmd&&t.cmd<=143?new e({count:15&t.cmd}):null},e}(y);e.VGMWrite2ACommand=k;var S=function(t){function e(e){var r=t.call(this,104)||this;return r.blockType=e.blockType,r.readOffset=e.readOffset,r.writeOffset=e.writeOffset,r.writeSize=e.writeSize,r}return i(e,t),e.prototype.copy=function(t){return new e({blockType:null!=t.blockType?t.blockType:this.blockType,readOffset:null!=t.readOffset?t.readOffset:this.readOffset,writeOffset:null!=t.writeOffset?t.writeOffset:this.writeOffset,writeSize:null!=t.writeSize?t.writeSize:this.writeSize})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 12},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=this.cmd,t[1]=102,t[2]=this.blockType,h(t,3,this.readOffset),h(t,6,this.writeOffset),h(t,9,this.writeSize),t},e.parse=function(t,r){return void 0===r&&(r=0),104===t[r]?new e({blockType:t[r+2],readOffset:l(t,r+3),writeOffset:l(t,r+6),writeSize:l(t,r+9)}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,blockType:this.blockType,readOffset:this.readOffset,writeOffset:this.writeOffset,writeSize:this.writeSize}},e.fromObject=function(t){if(104===t.cmd){if(null==t.blockType||null==t.readOffset||null==t.writeOffset||null==t.writeSize)throw new Error("Can't create VGMPCMRAMWriteCommand: required parameter is missing.");return new e(t)}return null},e}(y);e.VGMPCMRAMWriteCommand=S;var E=function(t){function e(e){var r=t.call(this,e.cmd)||this;if(r.chip=a(e.cmd),r.index=e.index||0,r.port=e.port||0,r.addr=e.addr||0,r.data=e.data,48<=r.cmd&&r.cmd<=63||79===r.cmd||80===r.cmd)r.size=2;else if(64<=r.cmd&&r.cmd<=78)r.size=3;else if(81<=r.cmd&&r.cmd<=95)r.size=3;else if(160<=r.cmd&&r.cmd<=191)r.size=3;else if(192<=r.cmd&&r.cmd<=223)r.size=4;else{if(!(224<=r.cmd&&r.cmd<=255))throw new Error(r.cmd+" is not a VGMWriteDataComand.");r.size=5}return r}return i(e,t),e.prototype.copy=function(t){return new e({cmd:null!=t.cmd?t.cmd:this.cmd,index:null!=t.index?t.index:this.index,port:null!=t.port?t.port:this.port,addr:null!=t.addr?t.addr:this.addr,data:null!=t.data?t.data:this.data})},e.prototype.clone=function(){return this.copy({})},e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);if(t[0]=this.cmd,48<=this.cmd&&this.cmd<=63||79===this.cmd||80===this.cmd)return t[1]=this.data,t;if(81<=this.cmd&&this.cmd<=95||160<=this.cmd&&this.cmd<=191)return t[1]=this.addr,t[2]=this.data,t;if(192<=this.cmd&&this.cmd<=194)return p(t,1,this.addr|this.index?32768:0),t[3]=this.data,t;if(195===this.cmd)return t[1]=this.addr|this.index?128:0,p(t,2,this.data),t;if(196===this.cmd)return u(t,1,this.data),t[3]=this.addr,t;if(197<=this.cmd&&this.cmd<=200)return u(t,1,this.addr|this.index?32768:0),t[3]=this.data,t;if(208<=this.cmd&&this.cmd<=210)return t[1]=this.port|this.index?128:0,t[2]=this.addr,t[3]=this.data,t;if(211<=this.cmd&&this.cmd<=213)return u(t,1,this.addr|this.index?32768:0),t[3]=this.data,t;if(214===this.cmd)return t[1]=this.addr|this.index?128:0,u(t,2,this.data),t;if(225===this.cmd)return u(t,1,this.addr|this.index?32768:0),u(t,3,this.data),t;throw new Error(this.cmd+" is not a VGMWriteDataCommand")},Object.defineProperty(e.prototype,"chipName",{get:function(){return a(this.cmd)},enumerable:!0,configurable:!0}),e.parse=function(t,r){void 0===r&&(r=0);var n,i=t[r+0];if(48<=i&&i<=63)return new e({cmd:i,index:1,data:t[r+1]});if(79===i)return new e({cmd:i,index:0,data:t[r+1]});if(80===i)return new e({cmd:i,index:0,data:t[r+1]});if(160===i)return new e({cmd:i,index:128&(n=t[r+1])?1:0,port:0,addr:127&n,data:t[r+2]});if(81<=i&&i<=95||161<=i&&i<=175)return new e({cmd:i,index:80==(240&i)?0:1,port:o=0<=[3,7,9,15].indexOf(15&i)?1:0,addr:t[r+1],data:t[r+2]});if(176<=i&&i<=191)return new e({cmd:i,index:128&(n=t[r+1])?1:0,addr:127&n,data:t[r+2]});if(192<=i&&i<=194)return new e({cmd:i,index:32768&(n=f(t,r+1))?1:0,addr:32767&n,data:t[r+3]});if(195===i)return new e({cmd:i,index:128&(n=t[r+1])?1:0,addr:127&n,data:f(t,r+2)});if(196===i)return new e({cmd:i,index:0,addr:t[3],data:c(t,r+1)});if(197<=i&&i<=200)return new e({cmd:i,index:32768&(n=c(t,r+1))?1:0,addr:32767&n,data:t[r+3]});if(208<=i&&i<=210){var o=127&t[r+1];return new e({cmd:i,index:128&t[r+1]?1:0,port:o,addr:t[r+2],data:t[r+3]})}return 211<=i&&i<=213?new e({cmd:i,index:32768&(n=c(t,r+1))?1:0,addr:32767&n,data:t[r+3]}):214===i?new e({cmd:i,index:128&(n=t[r+1])?1:0,addr:127&n,data:c(t,r+3)}):225===i?new e({cmd:i,index:32768&(n=c(t,r+1))?1:0,addr:32767&n,data:c(t,r+3)}):null},e.prototype.toObject=function(){return{cmd:this.cmd,chip:this.chip,size:this.size,index:this.index,port:this.port,addr:this.addr,data:this.data}},e.fromObject=function(t){var r=t.cmd;return 48===r||63===r||79===r||80<=r&&r<=95||160<=r&&r<=223||224===r||225===r?new e(t):null},e}(y);e.VGMWriteDataCommand=E;var _=function(t){function e(e,r){var n=t.call(this,e)||this;return n.streamId=r,n}return i(e,t),e}(y);e.VGMStreamCommand=_;var z=function(t){function e(e){var r=t.call(this,144,e.streamId)||this;return r.type=e.type,r.port=e.port,r.channel=e.channel,r}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId,type:null!=t.type?t.type:this.type,port:null!=t.port?t.port:this.port,channel:null!=t.channel?t.channel:this.channel})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 5},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=144,t[1]=this.streamId,t[2]=this.type,t[3]=this.port,t[4]=this.channel,t},e.parse=function(t,r){return void 0===r&&(r=0),144===t[r]?new e({streamId:t[r+1],type:t[r+2],port:t[r+3],channel:t[r+4]}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId,type:this.type,port:this.port,channel:this.channel}},e.fromObject=function(t){if(144===t.cmd){if(null==t.streamId||null==t.type||null==t.port||null==t.channel)throw new Error("Can't create VGMSetupStreamCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMSetupStreamCommand=z;var M=function(t){function e(e){var r=t.call(this,145,e.streamId)||this;return r.dataBankId=e.dataBankId,r.stepSize=e.stepSize,r.stepBase=e.stepBase,r}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId,dataBankId:null!=t.dataBankId?t.dataBankId:this.dataBankId,stepSize:null!=t.stepSize?t.stepSize:this.stepSize,stepBase:null!=t.stepBase?t.stepBase:this.stepBase})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 5},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=145,t[1]=this.streamId,t[2]=this.dataBankId,t[3]=this.stepSize,t[4]=this.stepBase,t},e.parse=function(t,r){return void 0===r&&(r=0),145===t[r]?new e({streamId:t[r+1],dataBankId:t[r+2],stepSize:t[r+3],stepBase:t[r+4]}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId,dataBankId:this.dataBankId,stepBase:this.stepBase,stepSize:this.stepSize}},e.fromObject=function(t){if(145===t.cmd){if(null==t.streamId||null==t.dataBankId||null==t.stepBase||null==t.stepSize)throw new Error("Can't create VGMSetStreamDataCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMSetStreamDataCommand=M;var x=function(t){function e(e){var r=t.call(this,146,e.streamId)||this;return r.frequency=e.frequency,r}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId,frequency:null!=t.frequency?t.frequency:this.frequency})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 6},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=146,t[1]=this.streamId,m(t,2,this.frequency),t},e.parse=function(t,r){return void 0===r&&(r=0),146===t[r]?new e({streamId:t[r+1],frequency:d(t,r+2)}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId,frequency:this.frequency}},e.fromObject=function(t){if(146===t.cmd){if(null==t.streamId||null==t.frequency)throw new Error("Can't create VGMSetStreamFrequencyCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMSetStreamFrequencyCommand=x;var I=function(t){function e(e){var r=t.call(this,147,e.streamId)||this;return r.offset=e.offset,r.lengthMode=e.lengthMode,r.dataLength=e.dataLength,r}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId,offset:null!=t.offset?t.offset:this.offset,lengthMode:null!=t.lengthMode?t.lengthMode:this.lengthMode,dataLength:null!=t.dataLength?t.dataLength:this.dataLength})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 11},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=147,t[1]=this.streamId,m(t,2,this.offset),t[6]=this.lengthMode,m(t,7,this.dataLength),t},e.parse=function(t,r){return void 0===r&&(r=0),147===t[r]?new e({streamId:t[r+1],offset:d(t,r+2),lengthMode:t[r+6],dataLength:d(t,r+7)}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId,offset:this.offset,lengthMode:this.lengthMode,dataLength:this.dataLength}},e.fromObject=function(t){if(147===t.cmd){if(null==t.streamId||null==t.offset||null==t.lengthMode||null==t.dataLength)throw new Error("Can't create VGMStartStreamCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMStartStreamCommand=I;var L=function(t){function e(e){return t.call(this,148,e.streamId)||this}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=148,t[1]=this.streamId,t},e.parse=function(t,r){return void 0===r&&(r=0),148===t[r]?new e({streamId:t[r+1]}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId}},e.fromObject=function(t){if(145===t.cmd){if(null==t.streamId)throw new Error("Can't create VGMStopStreamCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMStopStreamCommand=L;var A=function(t){function e(e){var r=t.call(this,149,e.streamId)||this;return r.blockId=e.blockId,r.flags=e.flags,r}return i(e,t),e.prototype.copy=function(t){return new e({streamId:null!=t.streamId?t.streamId:this.streamId,blockId:null!=t.blockId?t.blockId:this.blockId,flags:null!=t.flags?t.flags:this.flags})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 5},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=149,t[1]=this.streamId,p(t,2,this.blockId),t[4]=this.flags,t},e.parse=function(t,r){return void 0===r&&(r=0),149===t[r]?new e({streamId:t[r+1],blockId:f(t,r+2),flags:t[r+4]}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,streamId:this.streamId,blockId:this.blockId,flags:this.flags}},e.fromObject=function(t){if(149===t.cmd){if(null==t.streamId||null==t.blockId||null==t.flags)throw new Error("Can't create VGMStartStreamFastCommand: required parameter is missing.");return new e(t)}return null},e}(_);e.VGMStartStreamFastCommand=A;var T=function(t){function e(e){var r=t.call(this,224)||this;return r.offset=e.offset,r}return i(e,t),e.prototype.copy=function(t){return new e({offset:null!=t.offset?t.offset:this.offset})},e.prototype.clone=function(){return this.copy({})},Object.defineProperty(e.prototype,"size",{get:function(){return 5},enumerable:!0,configurable:!0}),e.prototype.toUint8Array=function(){var t=new Uint8Array(this.size);return t[0]=224,m(t,1,this.offset),t},e.parse=function(t,r){return void 0===r&&(r=0),224===t[r]?new e({offset:d(t,r+1)}):null},e.prototype.toObject=function(){return{cmd:this.cmd,size:this.size,offset:this.offset}},e.fromObject=function(t){if(224===t.cmd){if(null==t.offset)throw new Error("Can't create VGMSeekPCMCommand: required parameter is missing.");return new e(t)}return null},e}(y);function C(t,e){var r=k.parse(t,e)||E.parse(t,e)||O.parse(t,e)||w.parse(t,e)||j.parse(t,e)||U.parse(t,e)||T.parse(t,e)||b.parse(t,e)||S.parse(t,e)||z.parse(t,e)||M.parse(t,e)||x.parse(t,e)||I.parse(t,e)||L.parse(t,e)||A.parse(t,e)||g.parse(t,e);if(r)return r;if(t instanceof ArrayBuffer)throw new Error("Parse Error:: The buffer should not be an ArrayBuffer.");if(e<t.length)throw new Error("Parse Error:: 0x"+t[e].toString(16));throw new Error("Parse Error:: offset is out of range.")}e.VGMSeekPCMCommand=T,e.parseVGMCommand=C,e.fromVGMCommandObject=function(t){var e=k.fromObject(t)||E.fromObject(t)||O.fromObject(t)||w.fromObject(t)||j.fromObject(t)||U.fromObject(t)||T.fromObject(t)||b.fromObject(t)||S.fromObject(t)||z.fromObject(t)||M.fromObject(t)||x.fromObject(t)||I.fromObject(t)||L.fromObject(t)||A.fromObject(t)||g.fromObject(t);if(e)return e;throw new Error("Unsupported command: 0x"+t.cmd.toString(16))};var P=function(){function t(t){void 0===t&&(t=[]),this.byteLength=0,this.totalSamples=0,this.loopSamples=0,this.loopIndexOffset=0,this.loopByteOffset=0,this._loop=!1,this.commands=t}return t.prototype.clone=function(){var e=new t(this.commands.map((function(t){return t.clone()})));return e.byteLength=this.byteLength,e.totalSamples=this.totalSamples,e.loopSamples=this.loopSamples,e.loopIndexOffset=this.loopIndexOffset,e.loopByteOffset=this.loopByteOffset,e},t.prototype.clear=function(){this.commands=[],this.totalSamples=0,this.loopSamples=0,this.loopIndexOffset=0,this.byteLength=0,this.loopByteOffset=0,this._loop=!1},Object.defineProperty(t.prototype,"length",{get:function(){return this.commands.length},enumerable:!0,configurable:!0}),t.prototype.push=function(t){(t instanceof v||t instanceof k)&&(this.totalSamples+=t.count,this._loop&&(this.loopSamples+=t.count)),this.commands.push(t),this.byteLength+=t.size},t.prototype.markLoopPoint=function(){this._loop=!0,this.loopIndexOffset=this.commands.length,this.loopByteOffset=this.byteLength,this.loopSamples=0},t.parse=function(e){for(var r=new Uint8Array(e.data),n=new t,i=0;i<r.byteLength;){e.offsets.data+i===e.offsets.loop&&n.markLoopPoint();var o=C(r,i);if(null==o)break;if(n.push(o),i+=o.size,o instanceof g)break}return n},t.prototype.build=function(){return o.buildVGMData(this.commands)},t.prototype.toJSON=function(){var t=this,e=t.commands,r=t.loopSamples,n=t.loopIndexOffset,i=t.loopByteOffset,o=t.totalSamples;return{byteLength:t.byteLength,loopSamples:r,totalSamples:o,loopIndexOffset:n,loopByteOffset:i,commands:e}},t}();e.VGMDataStream=P},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=r(1);r(5);var o=r(9).Zlib;function s(t,e){var r=t.getUint32(e,!0);if(r)return{clock:1073741823&r,dual:!!(1073741824&r)}}function a(t,e,r){var n=t.getUint32(e,!0);if(n)return{clock:1073741823&n,dual:!!(1073741824&n),flags:t.getUint8(r)}}function c(t){var e=!!(128&t.getUint8(15)),r=a(t,12,43);if(r)return n({},r,{feedback:t.getUint16(40,!0),shiftRegisterWidth:t.getUint8(42),t6w28:e})}function u(t){var e=new DataView(t);if(540238919!=e.getUint32(0,!0))return i.createEmptyGD3TagObject();var r=e.getUint32(4,!0),n=e.getUint32(8,!0),o=function(t,e){for(var r=e,n=e,i=[];r<t.byteLength;){if(0===t.getUint16(r)){var o=new TextDecoder("utf-16").decode(new Uint8Array(t.buffer,n+t.byteOffset,r-n));i.push(o),n=r+=2}else r+=2}return i}(e,12);return{version:r,size:n,trackTitle:o[0],gameName:o[2],system:o[4],composer:o[6],releaseDate:o[8],vgmBy:o[9],notes:o[10],japanese:{trackTitle:o[1],gameName:o[3],system:o[5],composer:o[7]}}}e.parseVGM=function(t){var e,r=function(t){var e=new Uint8Array(t);if(31===e[0]&&139===e[1]){var r=new o.Gunzip(e).decompress();return 0<r.byteOffset?r.buffer.slice(r.byteOffset):r.buffer}return t}(t),f=new DataView(r),p=f.getUint32(8,!0),l={sn76489:c(f),ym2413:s(f,16)},h=f.getUint32(4,!0),d=f.getUint32(20,!0),m=f.getUint32(28,!0),y={version:(e=p,{code:e,major:(e>>8).toString(16),minor:("0"+(255&e).toString(16)).slice(-2)}),offsets:{eof:h?4+h:0,gd3:d?20+d:0,loop:m?28+m:0,data:64,extraHeader:0},samples:{total:f.getUint32(24,!0),loop:f.getUint32(32,!0)},rate:f.getUint32(36,!0),chips:l,loopModifier:0,loopBase:0,volumeModifier:0};if(p>=272&&(l.ym2612=function(t){var e=s(t,44);if(e){var r=e.clock>>30;return n({},e,{clock:2147483647&e.clock,chipType:{value:r,name:r?"YM3438":"YM2612"}})}}(f),l.ym2151=function(t){var e=s(t,48);if(e){var r=e.clock>>30;return n({},e,{clock:2147483647&e.clock,chipType:{value:r,name:r?"YM2164":"YM2151"}})}}(f)),p>=336&&(y.offsets.data=52+f.getUint32(52,!0)),p>=337&&(l.segaPcm=function(t){var e=s(t,56);if(e)return n({},e,{interfaceRegister:t.getUint32(60,!0)})}(f),l.rf5c68=s(f,64),l.ym2203=function(t){var e=s(t,68);if(e)return n({},e,{ssgFlags:t.getUint8(122)})}(f),l.ym2608=function(t){var e=s(t,72);if(e)return n({},e,{ssgFlags:t.getUint8(123)})}(f),l.ym2610=function(t){var e=s(t,76);if(e){var r=t.getUint8(76);return n({},e,{clock:2147483647&e.clock,chipType:{value:r,name:r?"YM2610":"YM2610B"}})}}(f),l.ym3812=s(f,80),l.ym3526=s(f,84),l.y8950=s(f,88),l.ymf262=s(f,92),l.ymf278b=s(f,96),l.ymf271=s(f,100),l.ymz280b=s(f,104),l.rf5c164=s(f,108),l.pwm=s(f,112),l.ay8910=function(t){var e=s(t,116);if(e){var r=t.getUint8(120),i=t.getUint8(121);return n({},e,{chipType:{value:r,name:function(t){switch(t){case 0:return"AY8910";case 1:return"AY8912";case 2:return"AY8913";case 3:return"AY8930";case 16:return"YM2149";case 17:return"YM3439";case 18:return"YMZ284";case 19:return"YMZ294";default:return"UNKNOWN"}}(r)},flags:i})}}(f),y.loopModifier=f.getUint8(127)),p>=352&&(y.volumeModifier=f.getUint8(124),y.loopBase=f.getUint8(126)),p>=353&&(l.gameBoyDmg=s(f,128),l.nesApu=function(t){var e=s(t,132);if(e)return n({},e,{fds:!!(128&t.getUint8(132))})}(f),l.multiPcm=s(f,136),l.upd7759=s(f,140),l.okim6258=a(f,144,148),l.c140=function(t){var e=s(t,168);if(e){var r=t.getUint8(150);return n({},e,{chipType:{value:r,name:function(t){switch(t){case 0:return"C140, Namco System 2";case 1:return"C140, Namco System 21";case 2:return"219 ASIC, Namco NA-1/2";default:return"UNKNOWN"}}(r)}})}}(f),l.okim6295=s(f,152),l.k051649=s(f,156),l.k054539=a(f,160,149),l.huc6280=s(f,164),l.k053260=s(f,172),l.pokey=s(f,176),l.qsound=s(f,180)),p>=368){var b=f.getUint32(188,!0);y.offsets.extraHeader=b?188+b:0}for(var g in p>=369&&(l.scsp=s(f,184),l.wonderSwan=s(f,192),l.vsu=s(f,196),l.saa1099=s(f,200),l.es5506=function(t){var e=s(t,208);if(e){var r=e.clock>>30;return n({},e,{clock:2147483647&e.clock,chipType:{value:r,name:r?"ES5506":"ES5505"},numberOfChannels:t.getUint8(213)})}}(f),l.es5503=function(t){var e=s(t,204);if(e)return n({},e,{numberOfChannels:t.getUint8(212)})}(f),l.x1_010=s(f,216),l.c352=function(t){var e=s(t,220);if(e)return n({},e,{clockDivider:t.getUint8(214)})}(f),l.ga20=s(f,224)),l)null==l[g]&&delete l[g];var v=y.offsets.extraHeader?function(t){var e,r,n=new DataView(t),o=n.getUint32(0,!0),s={};if(8<=o&&(s.chipClock=n.getUint32(4,!0),0<s.chipClock)){e=[];for(var a=4+s.chipClock,c=n.getUint8(a),u=0;u<c;u++){var f=n.getUint8(a+1+5*u),p=n.getUint32(a+2+5*u,!0),l=i.chipIdToName(f)||"unknown";e.push({chip:l,chipId:f,clock:p})}}if(12<=o&&(s.chipVolume=n.getUint32(8,!0),0<s.chipVolume)){r=[];for(a=8+s.chipVolume,c=n.getUint8(a),u=0;u<c;u++){var h=n.getUint8(a+1+4*u),d=(f=127&h,!!(128&h)),m=n.getUint8(a+2+4*u),y=n.getUint16(a+3+4*u,!0),b=32767&y,g=!!(32768&y);l=i.chipIdToName(f)||"unknown";r.push({chip:l,chipId:f,paired:d,flags:m,volume:b,absolute:g})}}return{clocks:e,volumes:r}}(r.slice(y.offsets.extraHeader)):void 0,w=y.offsets.gd3?u(r.slice(y.offsets.gd3)):void 0;return n({},y,{extraHeader:v,data:r.slice(y.offsets.data),gd3tag:w})}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(2)),n(r(1)),n(r(3)),n(r(0)),n(r(10))},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),c=n[r];r<o;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,t,n.depth)}function c(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function u(t,e){return t}function f(t,r,n){if(t.customInspect&&r&&U(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return b(i)||(i=f(t,i,n)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),j(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(U(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return t.stylize(Date.prototype.toString.call(r),"date");if(j(r))return p(r)}var u,w="",k=!1,S=["{","}"];(h(r)&&(k=!0,S=["[","]"]),U(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(w=" "+RegExp.prototype.toString.call(r)),O(r)&&(w=" "+Date.prototype.toUTCString.call(r)),j(r)&&(w=" "+p(r)),0!==s.length||k&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=k?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)z(e,String(s))?o.push(l(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))})),o}(t,r,n,a,s):s.map((function(e){return l(t,r,n,a,e,k)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,w,S)):S[0]+w+S[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),z(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(r)?f(t,c.value,null):f(t,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),g(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function g(t){return void 0===t}function v(t){return w(t)&&"[object RegExp]"===k(t)}function w(t){return"object"==typeof t&&null!==t}function O(t){return w(t)&&"[object Date]"===k(t)}function j(t){return w(t)&&("[object Error]"===k(t)||t instanceof Error)}function U(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(g(o)&&(o=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;s[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else s[r]=function(){};return s[r]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=d,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=v,e.isObject=w,e.isDate=O,e.isError=j,e.isFunction=U,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(7);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",_(),e.format.apply(e,arguments))},e.inherits=r(8),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var e;if("function"!=typeof(e=t[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),M&&Object.defineProperty(e,M,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=M,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(x,e,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(6))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,u=[],f=!1,p=-1;function l(){f&&c&&(f=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!f){var t=a(l);f=!0;for(var e=u.length;e;){for(c=u,u=[];++p<e;)c&&c[p].run();p=-1,e=u.length}c=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||f||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function t(t){throw t}var e=void 0,r=this;function n(t,n){var i,o=t.split("."),s=r;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||n===e?s=s[i]?s[i]:s[i]={}:s[i]=n}var i,o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;for(new(o?Uint8Array:Array)(256),i=0;256>i;++i)for(var s=(s=i)>>>1;s;s>>>=1)0;function a(t,e,r){var n,i="number"==typeof e?e:e=0,o="number"==typeof r?r:t.length;for(n=-1,i=7&o;i--;++e)n=n>>>8^u[255&(n^t[e])];for(i=o>>3;i--;e+=8)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^u[255&(n^t[e])])>>>8^u[255&(n^t[e+1])])>>>8^u[255&(n^t[e+2])])>>>8^u[255&(n^t[e+3])])>>>8^u[255&(n^t[e+4])])>>>8^u[255&(n^t[e+5])])>>>8^u[255&(n^t[e+6])])>>>8^u[255&(n^t[e+7])];return(4294967295^n)>>>0}var c=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],u=o?new Uint32Array(c):c;function f(){}function p(t){var e,r,n,i,s,a,c,u,f,p,l=t.length,h=0,d=Number.POSITIVE_INFINITY;for(u=0;u<l;++u)t[u]>h&&(h=t[u]),t[u]<d&&(d=t[u]);for(e=1<<h,r=new(o?Uint32Array:Array)(e),n=1,i=0,s=2;n<=h;){for(u=0;u<l;++u)if(t[u]===n){for(a=0,c=i,f=0;f<n;++f)a=a<<1|1&c,c>>=1;for(p=n<<16|u,f=a;f<e;f+=s)r[f]=p;++i}++n,i<<=1,s<<=1}return[r,h,d]}f.prototype.getName=function(){return this.name},f.prototype.getData=function(){return this.data},f.prototype.G=function(){return this.H};var l,h=[];for(l=0;288>l;l++)switch(!0){case 143>=l:h.push([l+48,8]);break;case 255>=l:h.push([l-144+400,9]);break;case 279>=l:h.push([l-256+0,7]);break;case 287>=l:h.push([l-280+192,8]);break;default:t("invalid literal: "+l)}var d=function(){function e(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:t("invalid length: "+e)}}var r,n,i=[];for(r=3;258>=r;r++)n=e(r),i[r]=n[2]<<24|n[1]<<16|n[0];return i}();function m(e,r){switch(this.i=[],this.j=32768,this.d=this.f=this.c=this.n=0,this.input=o?new Uint8Array(e):e,this.o=!1,this.k=b,this.w=!1,!r&&(r={})||(r.index&&(this.c=r.index),r.bufferSize&&(this.j=r.bufferSize),r.bufferType&&(this.k=r.bufferType),r.resize&&(this.w=r.resize)),this.k){case y:this.a=32768,this.b=new(o?Uint8Array:Array)(32768+this.j+258);break;case b:this.a=0,this.b=new(o?Uint8Array:Array)(this.j),this.e=this.D,this.q=this.A,this.l=this.C;break;default:t(Error("invalid inflate mode"))}}o&&new Uint32Array(d);var y=0,b=1;m.prototype.g=function(){for(;!this.o;){var r=P(this,3);switch(1&r&&(this.o=!0),r>>>=1){case 0:var n=this.input,i=this.c,s=this.b,a=this.a,c=n.length,u=e,f=s.length,l=e;switch(this.d=this.f=0,i+1>=c&&t(Error("invalid uncompressed block header: LEN")),u=n[i++]|n[i++]<<8,i+1>=c&&t(Error("invalid uncompressed block header: NLEN")),u===~(n[i++]|n[i++]<<8)&&t(Error("invalid uncompressed block header: length verify")),i+u>n.length&&t(Error("input buffer is broken")),this.k){case y:for(;a+u>s.length;){if(u-=l=f-a,o)s.set(n.subarray(i,i+l),a),a+=l,i+=l;else for(;l--;)s[a++]=n[i++];this.a=a,s=this.e(),a=this.a}break;case b:for(;a+u>s.length;)s=this.e({t:2});break;default:t(Error("invalid inflate mode"))}if(o)s.set(n.subarray(i,i+u),a),a+=u,i+=u;else for(;u--;)s[a++]=n[i++];this.c=i,this.a=a,this.b=s;break;case 1:this.l(A,C);break;case 2:var h,d,m,g,v=P(this,5)+257,w=P(this,5)+1,j=P(this,4)+4,U=new(o?Uint8Array:Array)(O.length),k=e,S=e,E=e,_=e,z=e;for(z=0;z<j;++z)U[O[z]]=P(this,3);if(!o)for(z=j,j=U.length;z<j;++z)U[O[z]]=0;for(h=p(U),k=new(o?Uint8Array:Array)(v+w),z=0,g=v+w;z<g;)switch(S=B(this,h),S){case 16:for(_=3+P(this,2);_--;)k[z++]=E;break;case 17:for(_=3+P(this,3);_--;)k[z++]=0;E=0;break;case 18:for(_=11+P(this,7);_--;)k[z++]=0;E=0;break;default:E=k[z++]=S}d=p(o?k.subarray(0,v):k.slice(0,v)),m=p(o?k.subarray(v):k.slice(v)),this.l(d,m);break;default:t(Error("unknown BTYPE: "+r))}}return this.q()};var g,v,w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=o?new Uint16Array(w):w,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],U=o?new Uint16Array(j):j,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],S=o?new Uint8Array(k):k,E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_=o?new Uint16Array(E):E,z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=o?new Uint8Array(z):z,x=new(o?Uint8Array:Array)(288);for(g=0,v=x.length;g<v;++g)x[g]=143>=g?8:255>=g?9:279>=g?7:8;var I,L,A=p(x),T=new(o?Uint8Array:Array)(30);for(I=0,L=T.length;I<L;++I)T[I]=5;var C=p(T);function P(e,r){for(var n,i=e.f,o=e.d,s=e.input,a=e.c,c=s.length;o<r;)a>=c&&t(Error("input buffer is broken")),i|=s[a++]<<o,o+=8;return n=i&(1<<r)-1,e.f=i>>>r,e.d=o-r,e.c=a,n}function B(e,r){for(var n,i,o=e.f,s=e.d,a=e.input,c=e.c,u=a.length,f=r[0],p=r[1];s<p&&!(c>=u);)o|=a[c++]<<s,s+=8;return(i=(n=f[o&(1<<p)-1])>>>16)>s&&t(Error("invalid code length: "+i)),e.f=o>>i,e.d=s-i,e.c=c,65535&n}function D(t){this.input=t,this.c=0,this.m=[],this.s=!1}m.prototype.l=function(t,e){var r=this.b,n=this.a;this.r=t;for(var i,o,s,a,c=r.length-258;256!==(i=B(this,t));)if(256>i)n>=c&&(this.a=n,r=this.e(),n=this.a),r[n++]=i;else for(a=U[o=i-257],0<S[o]&&(a+=P(this,S[o])),i=B(this,e),s=_[i],0<M[i]&&(s+=P(this,M[i])),n>=c&&(this.a=n,r=this.e(),n=this.a);a--;)r[n]=r[n++-s];for(;8<=this.d;)this.d-=8,this.c--;this.a=n},m.prototype.C=function(t,e){var r=this.b,n=this.a;this.r=t;for(var i,o,s,a,c=r.length;256!==(i=B(this,t));)if(256>i)n>=c&&(c=(r=this.e()).length),r[n++]=i;else for(a=U[o=i-257],0<S[o]&&(a+=P(this,S[o])),i=B(this,e),s=_[i],0<M[i]&&(s+=P(this,M[i])),n+a>c&&(c=(r=this.e()).length);a--;)r[n]=r[n++-s];for(;8<=this.d;)this.d-=8,this.c--;this.a=n},m.prototype.e=function(){var t,e,r=new(o?Uint8Array:Array)(this.a-32768),n=this.a-32768,i=this.b;if(o)r.set(i.subarray(32768,r.length));else for(t=0,e=r.length;t<e;++t)r[t]=i[t+32768];if(this.i.push(r),this.n+=r.length,o)i.set(i.subarray(n,n+32768));else for(t=0;32768>t;++t)i[t]=i[n+t];return this.a=32768,i},m.prototype.D=function(t){var e,r,n,i=this.input.length/this.c+1|0,s=this.input,a=this.b;return t&&("number"==typeof t.t&&(i=t.t),"number"==typeof t.z&&(i+=t.z)),2>i?r=(n=(s.length-this.c)/this.r[2]/2*258|0)<a.length?a.length+n:a.length<<1:r=a.length*i,o?(e=new Uint8Array(r)).set(a):e=a,this.b=e},m.prototype.q=function(){var t,e,r,n,i,s=0,a=this.b,c=this.i,u=new(o?Uint8Array:Array)(this.n+(this.a-32768));if(0===c.length)return o?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,r=c.length;e<r;++e)for(n=0,i=(t=c[e]).length;n<i;++n)u[s++]=t[n];for(e=32768,r=this.a;e<r;++e)u[s++]=a[e];return this.i=[],this.buffer=u},m.prototype.A=function(){var t,e=this.a;return o?this.w?(t=new Uint8Array(e)).set(this.b.subarray(0,e)):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},D.prototype.F=function(){return this.s||this.g(),this.m.slice()},D.prototype.g=function(){for(var r=this.input.length;this.c<r;){var n,i,s=new f,c=e,u=e,p=e,l=e,h=e,d=e,y=e,b=this.input,g=this.c;switch(s.u=b[g++],s.v=b[g++],(31!==s.u||139!==s.v)&&t(Error("invalid file signature:"+s.u+","+s.v)),s.p=b[g++],s.p){case 8:break;default:t(Error("unknown compression method: "+s.p))}if(s.h=b[g++],i=b[g++]|b[g++]<<8|b[g++]<<16|b[g++]<<24,s.H=new Date(1e3*i),s.N=b[g++],s.M=b[g++],0<(4&s.h)&&(s.I=b[g++]|b[g++]<<8,g+=s.I),0<(8&s.h)){for(d=[],h=0;0<(l=b[g++]);)d[h++]=String.fromCharCode(l);s.name=d.join("")}if(0<(16&s.h)){for(d=[],h=0;0<(l=b[g++]);)d[h++]=String.fromCharCode(l);s.J=d.join("")}0<(2&s.h)&&(s.B=65535&a(b,0,g),s.B!==(b[g++]|b[g++]<<8)&&t(Error("invalid header crc16"))),c=b[b.length-4]|b[b.length-3]<<8|b[b.length-2]<<16|b[b.length-1]<<24,b.length-g-4-4<512*c&&(p=c),u=new m(b,{index:g,bufferSize:p}),s.data=n=u.g(),g=u.c,s.K=y=(b[g++]|b[g++]<<8|b[g++]<<16|b[g++]<<24)>>>0,a(n,e,e)!==y&&t(Error("invalid CRC-32 checksum: 0x"+a(n,e,e).toString(16)+" / 0x"+y.toString(16))),s.L=c=(b[g++]|b[g++]<<8|b[g++]<<16|b[g++]<<24)>>>0,(4294967295&n.length)!==c&&t(Error("invalid input size: "+(4294967295&n.length)+" / "+c)),this.m.push(s),this.c=g}this.s=!0;var v,w,O,j=this.m,U=0,k=0;for(v=0,w=j.length;v<w;++v)k+=j[v].data.length;if(o)for(O=new Uint8Array(k),v=0;v<w;++v)O.set(j[v].data,U),U+=j[v].data.length;else{for(O=[],v=0;v<w;++v)O[v]=j[v].data;O=Array.prototype.concat.apply([],O)}return O},n("Zlib.Gunzip",D),n("Zlib.Gunzip.prototype.decompress",D.prototype.g),n("Zlib.Gunzip.prototype.getMembers",D.prototype.F),n("Zlib.GunzipMember",f),n("Zlib.GunzipMember.prototype.getName",f.prototype.getName),n("Zlib.GunzipMember.prototype.getData",f.prototype.getData),n("Zlib.GunzipMember.prototype.getMtime",f.prototype.G)}).call(this)},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=r(3),s=r(0),a=r(2),c=function(){function t(t){this._obj=t?i.deepCloneVGMObject(t):i.createEmptyVGMObject()}return t.prototype._updateEOFOffset=function(){this._obj.gd3tag?(this._obj.offsets.gd3=this._obj.offsets.data+this._obj.data.byteLength,this._obj.offsets.eof=this._obj.offsets.gd3+12+i.calcGD3TagBodySize(this._obj.gd3tag)):(this._obj.offsets.gd3=0,this._obj.offsets.eof=this._obj.offsets.data+this._obj.data.byteLength)},Object.defineProperty(t.prototype,"version",{get:function(){return this._obj.version},set:function(t){this._obj.version=n({},t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._obj.offsets},set:function(t){this._obj.offsets=n({},t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"samples",{get:function(){return this._obj.samples},set:function(t){this._obj.samples=n({},t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this._obj.rate},set:function(t){this._obj.rate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chips",{get:function(){return this._obj.chips},set:function(t){this._obj.chips=i.deepCloneChipsObject(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopModifier",{get:function(){return this._obj.loopModifier},set:function(t){this._obj.loopModifier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopBase",{get:function(){return this._obj.loopBase},set:function(t){this._obj.loopBase=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volumeModifier",{get:function(){return this._obj.volumeModifier},set:function(t){this._obj.volumeModifier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._obj.data},set:function(t){this._obj.data=t.slice(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usedChips",{get:function(){return Object.keys(this._obj.chips)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gd3tag",{get:function(){return this._obj.gd3tag},set:function(t){this._obj.gd3tag=i.deepCloneGD3TagObject(t),this._updateEOFOffset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraHeader",{get:function(){return this._obj.extraHeader},enumerable:!0,configurable:!0}),t.prototype.toObject=function(){return i.deepCloneVGMObject(this._obj)},t.prototype.clone=function(){return new t(i.deepCloneVGMObject(this._obj))},t.parse=function(e){return new t(o.parseVGM(e))},t.prototype.build=function(){return s.buildVGM(this)},t.prototype.getDataStream=function(){return a.VGMDataStream.parse(this._obj)},t.prototype.setDataStream=function(t){this.setData(t.build(),t.totalSamples,t.loopSamples,t.loopByteOffset)},t.prototype.setData=function(t,e,r,n){this._obj.data=t.slice(0),this._obj.offsets.loop=0<r?this._obj.offsets.data+n:0,this._obj.samples={total:e,loop:r},this._updateEOFOffset()},t.prototype.toJSON=function(){return n({},this._obj,{data:this.getDataStream()})},t}();e.VGM=c,e.formatMinSec=function(t,e){void 0===e&&(e=44100);var r=Math.round(t/e*1e3),n=Math.floor(r/6e4),i=Math.floor((r-6e4*n)/1e3),o=Math.round((r-1e3*i)/10);return("0"+n).slice(-2)+":"+("0"+i).slice(-2)+"."+("0"+o).slice(-2)}}]).VGM;